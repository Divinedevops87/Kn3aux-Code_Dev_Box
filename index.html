<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KN3AUX-CODEâ„¢ Universal App Builder</title>
    <meta name="description" content="AI-powered app builder with scraping, deployment, and multi-platform support">
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        * { box-sizing: border-box; }
        body { 
            margin: 0; 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow-x: hidden;
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .phone-frame {
            background: linear-gradient(145deg, #2d3748, #1a202c);
            border-radius: 2rem;
            padding: 1rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }
        .phone-screen {
            background: white;
            border-radius: 1.5rem;
            overflow: hidden;
            position: relative;
        }
        .phone-notch {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 8rem;
            height: 1.5rem;
            background: #1a202c;
            border-radius: 0 0 1rem 1rem;
            z-index: 50;
        }
        .component-hover:hover { 
            transform: translateY(-2px) scale(1.02); 
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .animate-fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .scrollbar-thin::-webkit-scrollbar { width: 4px; }
        .scrollbar-thin::-webkit-scrollbar-track { background: rgba(255,255,255,0.1); }
        .scrollbar-thin::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.3); border-radius: 2px; }
        .component-selected { 
            outline: 2px solid #3b82f6; 
            outline-offset: 2px; 
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
        }
        .drop-zone {
            min-height: 60px;
            border: 2px dashed #d1d5db;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 8px 0;
            transition: all 0.2s;
        }
        .drop-zone:hover, .drop-zone.drag-over {
            border-color: #3b82f6;
            background-color: #eff6ff;
        }
        .function-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }
        .glow-effect {
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);
        }
        @media (max-width: 768px) {
            .mobile-stack { flex-direction: column; }
            .mobile-full { width: 100%; }
            .mobile-hidden { display: none; }
            .function-grid { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); }
        }
        .pulse { animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            max-width: 400px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useCallback, useEffect, useMemo } = React;

        // Component types
        const COMPONENT_TYPES = {
            TEXT: 'text',
            HEADING: 'heading',
            IMAGE: 'image',
            BUTTON: 'button',
            INPUT: 'input',
            TEXTAREA: 'textarea',
            CARD: 'card',
            LIST: 'list',
            NAVBAR: 'navbar',
            CONTAINER: 'container',
            SPACER: 'spacer',
            BADGE: 'badge',
            ALERT: 'alert',
            PROGRESS: 'progress',
            AVATAR: 'avatar',
            GRID: 'grid',
            FLEX: 'flex'
        };

        // Icon component wrapper
        const Icon = ({ name, size = 20, color = "currentColor", className = "", ...props }) => {
            const IconComponent = lucide[name];
            return IconComponent ? React.createElement(IconComponent, { size, color, className, ...props }) : null;
        };

        // Generate unique ID
        const generateId = () => `comp_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;

        // Notification Component
        const Notification = ({ message, type = 'info', onClose }) => {
            useEffect(() => {
                const timer = setTimeout(onClose, 3000);
                return () => clearTimeout(timer);
            }, [onClose]);

            const bgColor = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                warning: 'bg-yellow-500',
                info: 'bg-blue-500'
            }[type];

            const icon = {
                success: 'CheckCircle',
                error: 'XCircle',
                warning: 'AlertTriangle',
                info: 'Info'
            }[type];

            return (
                <div className={`notification ${bgColor} text-white p-4 rounded-lg shadow-lg animate-fade-in`}>
                    <div className="flex items-center space-x-3">
                        <Icon name={icon} size={20} />
                        <span className="font-medium">{message}</span>
                        <button onClick={onClose} className="ml-auto">
                            <Icon name="X" size={16} />
                        </button>
                    </div>
                </div>
            );
        };

        // One-Click Functions Configuration
        const ONE_CLICK_FUNCTIONS = [
            { id: 'scrapeWithSGAI', name: 'Scrape with AI', icon: 'Search', category: 'scraping', color: 'from-blue-500 to-blue-700' },
            { id: 'chainPlaywright', name: 'Detail Scraping', icon: 'Link', category: 'scraping', color: 'from-green-500 to-green-700' },
            { id: 'parseWithBSoup', name: 'Parse HTML', icon: 'Code', category: 'scraping', color: 'from-yellow-500 to-yellow-700' },
            { id: 'langchainRAG', name: 'RAG Pipeline', icon: 'Brain', category: 'ai', color: 'from-purple-500 to-purple-700' },
            { id: 'summarizeWithHF', name: 'AI Summarize', icon: 'FileText', category: 'ai', color: 'from-pink-500 to-pink-700' },
            { id: 'structureJSON', name: 'Structure Data', icon: 'Database', category: 'ai', color: 'from-indigo-500 to-indigo-700' },
            { id: 'generateBackend', name: 'Backend Scaffold', icon: 'Server', category: 'generation', color: 'from-red-500 to-red-700' },
            { id: 'generateFrontend', name: 'Frontend Scaffold', icon: 'Monitor', category: 'generation', color: 'from-teal-500 to-teal-700' },
            { id: 'bootstrapBolt', name: 'Bolt.diy Project', icon: 'Zap', category: 'generation', color: 'from-orange-500 to-orange-700' },
            { id: 'runBoltBuild', name: 'Compile & Bundle', icon: 'Package', category: 'build', color: 'from-cyan-500 to-cyan-700' },
            { id: 'previewInIframe', name: 'Live Preview', icon: 'Eye', category: 'build', color: 'from-lime-500 to-lime-700' },
            { id: 'syncToLocal', name: 'Download Local', icon: 'Download', category: 'export', color: 'from-emerald-500 to-emerald-700' },
            { id: 'packageToZip', name: 'Export ZIP', icon: 'Archive', category: 'export', color: 'from-violet-500 to-violet-700' },
            { id: 'pushToGitHub', name: 'Push to GitHub', icon: 'Github', category: 'deploy', color: 'from-gray-600 to-gray-800' },
            { id: 'deployToNetlify', name: 'Deploy Netlify', icon: 'Globe', category: 'deploy', color: 'from-blue-600 to-blue-800' },
            { id: 'deployToVercel', name: 'Deploy Vercel', icon: 'Triangle', category: 'deploy', color: 'from-black to-gray-800' },
            { id: 'openInVSCode', name: 'Open VS Code', icon: 'Code2', category: 'tools', color: 'from-blue-400 to-blue-600' },
            { id: 'runServiceWorker', name: 'Enable Offline', icon: 'Wifi', category: 'tools', color: 'from-green-400 to-green-600' },
            { id: 'installKodi', name: 'Kodi Support', icon: 'Tv', category: 'integrations', color: 'from-red-400 to-red-600' },
            { id: 'scaffoldKodi', name: 'Kodi App', icon: 'Film', category: 'integrations', color: 'from-purple-400 to-purple-600' },
            { id: 'scanWithHF', name: 'HF Classification', icon: 'ScanLine', category: 'ai', color: 'from-yellow-400 to-yellow-600' },
            { id: 'boltAICompletion', name: 'Code Assistant', icon: 'Bot', category: 'ai', color: 'from-pink-400 to-pink-600' },
            { id: 'renderCodeEditor', name: 'Code Editor', icon: 'Edit', category: 'tools', color: 'from-indigo-400 to-indigo-600' },
            { id: 'launchTerminal', name: 'Terminal', icon: 'Terminal', category: 'tools', color: 'from-gray-400 to-gray-600' },
            { id: 'runTests', name: 'Auto Tests', icon: 'TestTube', category: 'build', color: 'from-green-500 to-green-700' },
            { id: 'formatCode', name: 'Format Code', icon: 'Sparkles', category: 'tools', color: 'from-blue-500 to-blue-700' },
            { id: 'bundleElectron', name: 'Desktop Build', icon: 'Laptop', category: 'build', color: 'from-purple-500 to-purple-700' },
            { id: 'bundleMobile', name: 'Mobile Build', icon: 'Smartphone', category: 'build', color: 'from-teal-500 to-teal-700' },
            { id: 'setupCI', name: 'CI/CD Pipeline', icon: 'GitBranch', category: 'deploy', color: 'from-orange-500 to-orange-700' },
            { id: 'monitorUsage', name: 'Analytics', icon: 'BarChart', category: 'tools', color: 'from-cyan-500 to-cyan-700' }
        ];

        // Function Panel Component
        const FunctionPanel = ({ onExecuteFunction }) => {
            const [activeCategory, setActiveCategory] = useState('all');
            const [searchTerm, setSearchTerm] = useState('');

            const categories = ['all', 'scraping', 'ai', 'generation', 'build', 'export', 'deploy', 'tools', 'integrations'];
            
            const filteredFunctions = ONE_CLICK_FUNCTIONS.filter(func => {
                const matchesCategory = activeCategory === 'all' || func.category === activeCategory;
                const matchesSearch = func.name.toLowerCase().includes(searchTerm.toLowerCase());
                return matchesCategory && matchesSearch;
            });

            return (
                <div className="w-full bg-gray-900 text-white p-4 rounded-xl glass-effect">
                    <div className="flex items-center justify-between mb-4">
                        <div className="flex items-center space-x-3">
                            <Icon name="Zap" size={24} color="#F59E0B" />
                            <h3 className="text-lg font-bold">33 One-Click Functions</h3>
                        </div>
                        <div className="text-xs bg-purple-600 px-2 py-1 rounded-full">
                            {filteredFunctions.length} functions
                        </div>
                    </div>

                    {/* Search */}
                    <div className="relative mb-4">
                        <Icon name="Search" size={16} className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400" />
                        <input
                            type="text"
                            placeholder="Search functions..."
                            value={searchTerm}
                            onChange={(e) => setSearchTerm(e.target.value)}
                            className="w-full pl-10 pr-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-sm focus:outline-none focus:border-purple-500"
                        />
                    </div>

                    {/* Categories */}
                    <div className="flex space-x-2 mb-4 overflow-x-auto pb-2">
                        {categories.map(category => (
                            <button
                                key={category}
                                onClick={() => setActiveCategory(category)}
                                className={`px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap transition-all ${
                                    activeCategory === category
                                        ? 'bg-purple-600 text-white glow-effect'
                                        : 'bg-gray-800 text-gray-400 hover:bg-gray-700'
                                }`}
                            >
                                {category.charAt(0).toUpperCase() + category.slice(1)}
                            </button>
                        ))}
                    </div>

                    {/* Functions Grid */}
                    <div className="function-grid max-h-96 overflow-y-auto scrollbar-thin">
                        {filteredFunctions.map((func) => (
                            <button
                                key={func.id}
                                onClick={() => onExecuteFunction(func)}
                                className={`p-3 rounded-lg text-left transition-all component-hover bg-gradient-to-r ${func.color} text-white shadow-lg hover:shadow-xl`}
                            >
                                <div className="flex items-center space-x-2 mb-1">
                                    <Icon name={func.icon} size={16} />
                                    <span className="text-sm font-semibold">{func.name}</span>
                                </div>
                                <div className="text-xs opacity-80 capitalize">{func.category}</div>
                            </button>
                        ))}
                    </div>
                </div>
            );
        };

        // Component Library
        const ComponentLibrary = ({ onAddComponent }) => {
            const [searchTerm, setSearchTerm] = useState('');
            const [activeCategory, setActiveCategory] = useState('all');

            const componentCategories = {
                content: [
                    { id: 'text', name: 'Text', icon: 'Type', type: COMPONENT_TYPES.TEXT },
                    { id: 'heading', name: 'Heading', icon: 'Heading', type: COMPONENT_TYPES.HEADING },
                    { id: 'image', name: 'Image', icon: 'Image', type: COMPONENT_TYPES.IMAGE }
                ],
                forms: [
                    { id: 'button', name: 'Button', icon: 'Square', type: COMPONENT_TYPES.BUTTON },
                    { id: 'input', name: 'Input', icon: 'Edit3', type: COMPONENT_TYPES.INPUT },
                    { id: 'textarea', name: 'Textarea', icon: 'FileText', type: COMPONENT_TYPES.TEXTAREA }
                ],
                layout: [
                    { id: 'container', name: 'Container', icon: 'Box', type: COMPONENT_TYPES.CONTAINER },
                    { id: 'grid', name: 'Grid', icon: 'Grid3X3', type: COMPONENT_TYPES.GRID },
                    { id: 'flex', name: 'Flex', icon: 'AlignJustify', type: COMPONENT_TYPES.FLEX },
                    { id: 'spacer', name: 'Spacer', icon: 'Minus', type: COMPONENT_TYPES.SPACER }
                ],
                components: [
                    { id: 'card', name: 'Card', icon: 'CreditCard', type: COMPONENT_TYPES.CARD },
                    { id: 'list', name: 'List', icon: 'List', type: COMPONENT_TYPES.LIST },
                    { id: 'navbar', name: 'Navbar', icon: 'Navigation', type: COMPONENT_TYPES.NAVBAR },
                    { id: 'badge', name: 'Badge', icon: 'Tag', type: COMPONENT_TYPES.BADGE },
                    { id: 'alert', name: 'Alert', icon: 'AlertCircle', type: COMPONENT_TYPES.ALERT },
                    { id: 'progress', name: 'Progress', icon: 'BarChart3', type: COMPONENT_TYPES.PROGRESS },
                    { id: 'avatar', name: 'Avatar', icon: 'User', type: COMPONENT_TYPES.AVATAR }
                ]
            };

            const allComponents = Object.values(componentCategories).flat();
            const filteredComponents = activeCategory === 'all' 
                ? allComponents 
                : componentCategories[activeCategory] || [];

            const searchResults = filteredComponents.filter(comp =>
                comp.name.toLowerCase().includes(searchTerm.toLowerCase())
            );

            return (
                <div className="w-full md:w-72 bg-gray-900 text-white flex flex-col h-full glass-effect rounded-xl">
                    {/* Header */}
                    <div className="p-4 border-b border-gray-700">
                        <div className="flex items-center space-x-3 mb-4">
                            <Icon name="Package" size={24} color="#8B5CF6" />
                            <div>
                                <h3 className="text-lg font-bold">Components</h3>
                                <p className="text-xs text-gray-400">Tap to add to canvas</p>
                            </div>
                        </div>
                        
                        {/* Search */}
                        <div className="relative">
                            <Icon name="Search" size={16} className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400" />
                            <input
                                type="text"
                                placeholder="Search components..."
                                value={searchTerm}
                                onChange={(e) => setSearchTerm(e.target.value)}
                                className="w-full pl-10 pr-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-sm focus:outline-none focus:border-purple-500"
                            />
                        </div>
                    </div>

                    {/* Categories */}
                    <div className="px-4 py-2 border-b border-gray-700">
                        <div className="flex space-x-1 overflow-x-auto">
                            {['all', 'content', 'forms', 'layout', 'components'].map(category => (
                                <button
                                    key={category}
                                    onClick={() => setActiveCategory(category)}
                                    className={`px-3 py-1 rounded text-xs font-medium whitespace-nowrap transition-all ${
                                        activeCategory === category
                                            ? 'bg-purple-600 text-white glow-effect'
                                            : 'bg-gray-800 text-gray-400 hover:bg-gray-700'
                                    }`}
                                >
                                    {category.charAt(0).toUpperCase() + category.slice(1)}
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* Components List */}
                    <div className="flex-1 overflow-y-auto scrollbar-thin p-4">
                        <div className="space-y-2">
                            {searchResults.map((comp) => (
                                <ComponentItem
                                    key={comp.id}
                                    component={comp}
                                    onAddComponent={onAddComponent}
                                />
                            ))}
                        </div>
                        
                        {searchResults.length === 0 && (
                            <div className="text-center py-8 text-gray-400">
                                <Icon name="Search" size={32} className="mx-auto mb-2 opacity-50" />
                                <p className="text-sm">No components found</p>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // Component Item
        const ComponentItem = ({ component, onAddComponent }) => {
            const handleClick = () => {
                onAddComponent({
                    type: component.type,
                    name: component.name
                });
            };

            return (
                <div
                    onClick={handleClick}
                    className="flex items-center p-3 bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-700 transition-all component-hover border border-gray-700 hover:border-purple-500"
                >
                    <Icon name={component.icon} size={18} color="#60A5FA" className="mr-3" />
                    <span className="text-sm font-medium">{component.name}</span>
                </div>
            );
        };

        // Canvas Component Renderer
        const CanvasComponent = ({ component, isSelected, onClick, onUpdate, onDelete }) => {
            const [isEditing, setIsEditing] = useState(false);

            const handleDoubleClick = () => {
                if (component.type === COMPONENT_TYPES.TEXT || component.type === COMPONENT_TYPES.HEADING) {
                    setIsEditing(true);
                }
            };

            const handleTextChange = (newText) => {
                onUpdate(component.id, { content: newText });
                setIsEditing(false);
            };

            const renderComponent = () => {
                const style = {
                    backgroundColor: component.backgroundColor || 'transparent',
                    color: component.textColor || '#000000',
                    fontSize: component.fontSize || '14px',
                    fontWeight: component.fontWeight || 'normal',
                    padding: component.padding || '8px',
                    margin: component.margin || '4px 0',
                    borderRadius: component.borderRadius || '6px',
                    border: component.border || 'none',
                    width: component.width || 'auto',
                    height: component.height || 'auto'
                };

                switch (component.type) {
                    case COMPONENT_TYPES.TEXT:
                        return isEditing ? (
                            <input
                                type="text"
                                defaultValue={component.content || 'Sample Text'}
                                onBlur={(e) => handleTextChange(e.target.value)}
                                onKeyPress={(e) => e.key === 'Enter' && handleTextChange(e.target.value)}
                                className="w-full p-1 border-none outline-none bg-transparent"
                                autoFocus
                            />
                        ) : (
                            <p style={style} className="min-h-[20px]">
                                {component.content || 'Sample Text'}
                            </p>
                        );

                    case COMPONENT_TYPES.HEADING:
                        return isEditing ? (
                            <input
                                type="text"
                                defaultValue={component.content || 'Heading'}
                                onBlur={(e) => handleTextChange(e.target.value)}
                                onKeyPress={(e) => e.key === 'Enter' && handleTextChange(e.target.value)}
                                className="w-full p-1 border-none outline-none bg-transparent text-xl font-bold"
                                autoFocus
                            />
                        ) : (
                            <h2 style={{ ...style, fontSize: '24px', fontWeight: 'bold' }} className="text-2xl font-bold">
                                {component.content || 'Heading'}
                            </h2>
                        );

                    case COMPONENT_TYPES.BUTTON:
                        return (
                            <button
                                style={style}
                                className="px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all cursor-pointer shadow-lg hover:shadow-xl transform hover:scale-105"
                            >
                                {component.content || 'Button'}
                            </button>
                        );

                    case COMPONENT_TYPES.INPUT:
                        return (
                            <input
                                type={component.inputType || 'text'}
                                placeholder={component.placeholder || 'Enter text...'}
                                style={style}
                                className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm"
                            />
                        );

                    case COMPONENT_TYPES.TEXTAREA:
                        return (
                            <textarea
                                placeholder={component.placeholder || 'Enter text...'}
                                style={style}
                                className="w-full p-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm"
                                rows={component.rows || 4}
                            />
                        );

                    case COMPONENT_TYPES.IMAGE:
                        return (
                            <div style={style} className="border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center min-h-[150px] bg-gray-50">
                                {component.src ? (
                                    <img src={component.src} alt={component.alt || 'Image'} className="max-w-full max-h-full object-contain rounded-lg" />
                                ) : (
                                    <div className="text-center">
                                        <Icon name="Image" size={32} className="mx-auto mb-2 text-gray-400" />
                                        <p className="text-sm text-gray-500 font-medium">Click to add image</p>
                                        <p className="text-xs text-gray-400">JPG, PNG, GIF up to 10MB</p>
                                    </div>
                                )}
                            </div>
                        );

                    case COMPONENT_TYPES.CARD:
                        return (
                            <div style={style} className="bg-white shadow-lg rounded-xl border border-gray-200 overflow-hidden hover:shadow-xl transition-shadow">
                                <div className="p-6">
                                    <h4 className="font-bold mb-3 text-xl text-gray-800">{component.title || 'Card Title'}</h4>
                                    <p className="text-gray-600 mb-4 leading-relaxed">{component.content || 'Card content goes here. This is a beautiful card component with modern styling.'}</p>
                                    {component.showButton !== false && (
                                        <button className="px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 text-sm font-medium transition-all transform hover:scale-105">
                                            {component.buttonText || 'Learn More'}
                                        </button>
                                    )}
                                </div>
                            </div>
                        );

                    case COMPONENT_TYPES.CONTAINER:
                        return (
                            <div
                                style={style}
                                className="border-2 border-dashed border-gray-300 rounded-lg min-h-[100px] relative bg-gray-50"
                            >
                                <div className="absolute top-2 left-2 text-xs text-gray-500 bg-white px-2 py-1 rounded shadow-sm font-medium">
                                    Container
                                </div>
                                <div className="p-6 pt-10">
                                    <div className="text-center text-gray-400">
                                        <Icon name="Plus" size={24} className="mx-auto mb-2" />
                                        <p className="text-sm font-medium">Drop components here</p>
                                    </div>
                                </div>
                            </div>
                        );

                    case COMPONENT_TYPES.NAVBAR:
                        return (
                            <nav style={style} className="bg-white shadow-md border-b px-6 py-4 flex items-center justify-between">
                                <div className="flex items-center space-x-4">
                                    <Icon name="Menu" size={20} className="text-gray-600" />
                                    <span className="font-bold text-lg text-gray-800">{component.brand || 'Brand'}</span>
                                </div>
                                <div className="flex items-center space-x-4">
                                    <Icon name="Search" size={18} className="text-gray-600 hover:text-blue-600 cursor-pointer transition-colors" />
                                    <Icon name="Bell" size={18} className="text-gray-600 hover:text-blue-600 cursor-pointer transition-colors" />
                                    <div className="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
                                        <Icon name="User" size={16} className="text-white" />
                                    </div>
                                </div>
                            </nav>
                        );

                    case COMPONENT_TYPES.BADGE:
                        return (
                            <span
                                style={style}
                                className="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-blue-100 to-blue-200 text-blue-800 shadow-sm"
                            >
                                {component.content || 'Badge'}
                            </span>
                        );

                    case COMPONENT_TYPES.ALERT:
                        return (
                            <div
                                style={style}
                                className={`p-4 rounded-lg border-l-4 shadow-sm ${
                                    component.variant === 'error' ? 'bg-red-50 border-red-400 text-red-700' :
                                    component.variant === 'warning' ? 'bg-yellow-50 border-yellow-400 text-yellow-700' :
                                    component.variant === 'success' ? 'bg-green-50 border-green-400 text-green-700' :
                                    'bg-blue-50 border-blue-400 text-blue-700'
                                }`}
                            >
                                <div className="flex items-center">
                                    <Icon 
                                        name={
                                            component.variant === 'error' ? 'AlertCircle' :
                                            component.variant === 'warning' ? 'AlertTriangle' :
                                            component.variant === 'success' ? 'CheckCircle' :
                                            'Info'
                                        } 
                                        size={18} 
                                        className="mr-3"
                                    />
                                    <span className="text-sm font-medium">
                                        {component.content || 'This is an important alert message'}
                                    </span>
                                </div>
                            </div>
                        );

                    case COMPONENT_TYPES.PROGRESS:
                        const progress = component.value || 65;
                        return (
                            <div style={style} className="w-full">
                                <div className="flex justify-between items-center mb-2">
                                    <span className="text-sm font-semibold text-gray-700">{component.label || 'Progress'}</span>
                                    <span className="text-sm text-gray-500 font-medium">{progress}%</span>
                                </div>
                                <div className="w-full bg-gray-200 rounded-full h-3 shadow-inner">
                                    <div
                                        className="bg-gradient-to-r from-blue-500 to-blue-600 h-3 rounded-full transition-all duration-500 shadow-sm"
                                        style={{ width: `${progress}%` }}
                                    ></div>
                                </div>
                            </div>
                        );

                    case COMPONENT_TYPES.AVATAR:
                        return (
                            <div
                                style={style}
                                className="w-14 h-14 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center overflow-hidden shadow-lg ring-2 ring-white"
                            >
                                {component.src ? (
                                    <img src={component.src} alt="Avatar" className="w-full h-full object-cover" />
                                ) : (
                                    <Icon name="User" size={24} className="text-white" />
                                )}
                            </div>
                        );

                    case COMPONENT_TYPES.LIST:
                        const items = component.items || ['List Item 1', 'List Item 2', 'List Item 3'];
                        return (
                            <ul style={style} className="space-y-2 bg-white rounded-lg shadow-sm border border-gray-200 p-4">
                                {items.map((item, index) => (
                                    <li key={index} className="flex items-center space-x-3 p-2 hover:bg-gray-50 rounded transition-colors">
                                        <div className="w-2 h-2 bg-blue-500 rounded-full"></div>
                                        <span className="text-sm text-gray-700">{item}</span>
                                    </li>
                                ))}
                            </ul>
                        );

                    case COMPONENT_TYPES.SPACER:
                        return (
                            <div
                                style={{ 
                                    height: component.height || '30px',
                                    backgroundColor: 'transparent'
                                }}
                                className="w-full border border-dashed border-gray-200 rounded flex items-center justify-center"
                            >
                                <span className="text-xs text-gray-400 font-medium">Spacer</span>
                            </div>
                        );

                    case COMPONENT_TYPES.GRID:
                        return (
                            <div
                                style={style}
                                className="grid grid-cols-2 gap-4 p-4 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50 min-h-[120px]"
                            >
                                <div className="bg-white rounded-lg shadow-sm border border-gray-200 flex items-center justify-center p-4">
                                    <span className="text-sm text-gray-500">Grid Item 1</span>
                                </div>
                                <div className="bg-white rounded-lg shadow-sm border border-gray-200 flex items-center justify-center p-4">
                                    <span className="text-sm text-gray-500">Grid Item 2</span>
                                </div>
                            </div>
                        );

                    case COMPONENT_TYPES.FLEX:
                        return (
                            <div
                                style={style}
                                className="flex space-x-4 p-4 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50 min-h-[80px]"
                            >
                                <div className="flex-1 bg-white rounded-lg shadow-sm border border-gray-200 flex items-center justify-center p-3">
                                    <span className="text-sm text-gray-500">Flex Item 1</span>
                                </div>
                                <div className="flex-1 bg-white rounded-lg shadow-sm border border-gray-200 flex items-center justify-center p-3">
                                    <span className="text-sm text-gray-500">Flex Item 2</span>
                                </div>
                            </div>
                        );

                    default:
                        return (
                            <div style={style} className="p-4 bg-gray-100 rounded-lg border-2 border-dashed border-gray-300">
                                <p className="text-sm text-gray-600 text-center font-medium">
                                    Unknown Component: {component.type}
                                </p>
                            </div>
                        );
                }
            };

            return (
                <div
                    onClick={onClick}
                    onDoubleClick={handleDoubleClick}
                    className={`relative group cursor-pointer transition-all animate-fade-in ${
                        isSelected ? 'component-selected' : ''
                    }`}
                    style={{
                        position: component.position || 'relative',
                        left: component.x || 0,
                        top: component.y || 0,
                        zIndex: isSelected ? 10 : 1
                    }}
                >
                    {renderComponent()}
                    
                    {isSelected && (
                        <>
                            <div className="absolute -top-3 -right-3 bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-lg cursor-pointer hover:bg-blue-600 transition-colors">
                                <Icon name="Settings" size={12} />
                            </div>
                            
                            <div 
                                className="absolute -bottom-3 -left-3 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-lg cursor-pointer hover:bg-red-600 transition-colors"
                                onClick={(e) => {
                                    e.stopPropagation();
                                    onDelete(component.id);
                                }}
                            >
                                <Icon name="Trash2" size={12} />
                            </div>
                        </>
                    )}
                </div>
            );
        };

        // Droppable Canvas
        const DroppableCanvas = ({ components, onDrop, onSelectComponent, selectedId, onUpdateComponent, onDeleteComponent }) => {
            const [draggedOver, setDraggedOver] = useState(false);

            const handleDragOver = (e) => {
                e.preventDefault();
                setDraggedOver(true);
            };

            const handleDragLeave = () => {
                setDraggedOver(false);
            };

            const handleDrop = (e) => {
                e.preventDefault();
                setDraggedOver(false);
                
                if (onDrop) {
                    onDrop({
                        x: e.clientX,
                        y: e.clientY
                    });
                }
            };

            return (
                <div className="flex-1 flex flex-col">
                    {/* Phone Preview */}
                    <div className="flex-1 flex items-center justify-center p-4">
                        <div className="phone-frame">
                            <div className="phone-screen w-80 h-[600px] relative">
                                <div className="phone-notch"></div>
                                
                                {/* Canvas Area */}
                                <div 
                                    className={`w-full h-full overflow-y-auto scrollbar-thin p-4 pt-8 ${
                                        draggedOver ? 'bg-blue-50' : 'bg-white'
                                    }`}
                                    onDragOver={handleDragOver}
                                    onDragLeave={handleDragLeave}
                                    onDrop={handleDrop}
                                >
                                    {components.length === 0 ? (
                                        <div className="h-full flex items-center justify-center text-center">
                                            <div>
                                                <Icon name="Smartphone" size={48} className="mx-auto mb-4 text-gray-300" />
                                                <h3 className="text-lg font-semibold text-gray-600 mb-2">Start Building</h3>
                                                <p className="text-sm text-gray-500 mb-4">Add components from the library</p>
                                                <div className="flex space-x-2 justify-center">
                                                    <div className="w-2 h-2 bg-blue-500 rounded-full animate-pulse"></div>
                                                    <div className="w-2 h-2 bg-purple-500 rounded-full animate-pulse" style={{animationDelay: '0.2s'}}></div>
                                                    <div className="w-2 h-2 bg-pink-500 rounded-full animate-pulse" style={{animationDelay: '0.4s'}}></div>
                                                </div>
                                            </div>
                                        </div>
                                    ) : (
                                        <div className="space-y-2">
                                            {components.map((component) => (
                                                <CanvasComponent
                                                    key={component.id}
                                                    component={component}
                                                    isSelected={selectedId === component.id}
                                                    onClick={() => onSelectComponent(component.id)}
                                                    onUpdate={onUpdateComponent}
                                                    onDelete={onDeleteComponent}
                                                />
                                            ))}
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Properties Panel
        const PropertiesPanel = ({ selectedComponent, onUpdateComponent }) => {
            if (!selectedComponent) {
                return (
                    <div className="w-full md:w-72 bg-gray-900 text-white p-4 rounded-xl glass-effect">
                        <div className="text-center py-8">
                            <Icon name="Settings" size={32} className="mx-auto mb-2 text-gray-400" />
                            <h3 className="text-lg font-semibold mb-2">Properties</h3>
                            <p className="text-sm text-gray-400">Select a component to edit its properties</p>
                        </div>
                    </div>
                );
            }

            const handlePropertyChange = (property, value) => {
                onUpdateComponent(selectedComponent.id, { [property]: value });
            };

            return (
                <div className="w-full md:w-72 bg-gray-900 text-white p-4 rounded-xl glass-effect">
                    <div className="flex items-center space-x-3 mb-4">
                        <Icon name="Settings" size={24} color="#8B5CF6" />
                        <div>
                            <h3 className="text-lg font-bold">Properties</h3>
                            <p className="text-xs text-gray-400">{selectedComponent.type} component</p>
                        </div>
                    </div>

                    <div className="space-y-4 max-h-96 overflow-y-auto scrollbar-thin">
                        {/* Content Properties */}
                        {(selectedComponent.type === COMPONENT_TYPES.TEXT || 
                          selectedComponent.type === COMPONENT_TYPES.HEADING ||
                          selectedComponent.type === COMPONENT_TYPES.BUTTON) && (
                            <div>
                                <label className="block text-sm font-medium mb-2">Content</label>
                                <input
                                    type="text"
                                    value={selectedComponent.content || ''}
                                    onChange={(e) => handlePropertyChange('content', e.target.value)}
                                    className="w-full p-2 bg-gray-800 border border-gray-600 rounded text-sm focus:outline-none focus:border-purple-500"
                                />
                            </div>
                        )}

                        {/* Background Color */}
                        <div>
                            <label className="block text-sm font-medium mb-2">Background Color</label>
                            <input
                                type="color"
                                value={selectedComponent.backgroundColor || '#ffffff'}
                                onChange={(e) => handlePropertyChange('backgroundColor', e.target.value)}
                                className="w-full h-10 bg-gray-800 border border-gray-600 rounded cursor-pointer"
                            />
                        </div>

                        {/* Text Color */}
                        <div>
                            <label className="block text-sm font-medium mb-2">Text Color</label>
                            <input
                                type="color"
                                value={selectedComponent.textColor || '#000000'}
                                onChange={(e) => handlePropertyChange('textColor', e.target.value)}
                                className="w-full h-10 bg-gray-800 border border-gray-600 rounded cursor-pointer"
                            />
                        </div>

                        {/* Font Size */}
                        <div>
                            <label className="block text-sm font-medium mb-2">Font Size</label>
                            <input
                                type="range"
                                min="10"
                                max="48"
                                value={parseInt(selectedComponent.fontSize) || 14}
                                onChange={(e) => handlePropertyChange('fontSize', `${e.target.value}px`)}
                                className="w-full"
                            />
                            <div className="text-xs text-gray-400 mt-1">{selectedComponent.fontSize || '14px'}</div>
                        </div>

                        {/* Padding */}
                        <div>
                            <label className="block text-sm font-medium mb-2">Padding</label>
                            <input
                                type="range"
                                min="0"
                                max="32"
                                value={parseInt(selectedComponent.padding) || 8}
                                onChange={(e) => handlePropertyChange('padding', `${e.target.value}px`)}
                                className="w-full"
                            />
                            <div className="text-xs text-gray-400 mt-1">{selectedComponent.padding || '8px'}</div>
                        </div>

                        {/* Border Radius */}
                        <div>
                            <label className="block text-sm font-medium mb-2">Border Radius</label>
                            <input
                                type="range"
                                min="0"
                                max="24"
                                value={parseInt(selectedComponent.borderRadius) || 0}
                                onChange={(e) => handlePropertyChange('borderRadius', `${e.target.value}px`)}
                                className="w-full"
                            />
                            <div className="text-xs text-gray-400 mt-1">{selectedComponent.borderRadius || '0px'}</div>
                        </div>

                        {/* Image specific properties */}
                        {selectedComponent.type === COMPONENT_TYPES.IMAGE && (
                            <div>
                                <label className="block text-sm font-medium mb-2">Image URL</label>
                                <input
                                    type="url"
                                    value={selectedComponent.src || ''}
                                    onChange={(e) => handlePropertyChange('src', e.target.value)}
                                    placeholder="https://example.com/image.jpg"
                                    className="w-full p-2 bg-gray-800 border border-gray-600 rounded text-sm focus:outline-none focus:border-purple-500"
                                />
                            </div>
                        )}

                        {/* Input specific properties */}
                        {selectedComponent.type === COMPONENT_TYPES.INPUT && (
                            <div>
                                <label className="block text-sm font-medium mb-2">Placeholder</label>
                                <input
                                    type="text"
                                    value={selectedComponent.placeholder || ''}
                                    onChange={(e) => handlePropertyChange('placeholder', e.target.value)}
                                    className="w-full p-2 bg-gray-800 border border-gray-600 rounded text-sm focus:outline-none focus:border-purple-500"
                                />
                            </div>
                        )}

                        {/* Alert variant */}
                        {selectedComponent.type === COMPONENT_TYPES.ALERT && (
                            <div>
                                <label className="block text-sm font-medium mb-2">Variant</label>
                                <select
                                    value={selectedComponent.variant || 'info'}
                                    onChange={(e) => handlePropertyChange('variant', e.target.value)}
                                    className="w-full p-2 bg-gray-800 border border-gray-600 rounded text-sm focus:outline-none focus:border-purple-500"
                                >
                                    <option value="info">Info</option>
                                    <option value="success">Success</option>
                                    <option value="warning">Warning</option>
                                    <option value="error">Error</option>
                                </select>
                            </div>
                        )}

                        {/* Progress value */}
                        {selectedComponent.type === COMPONENT_TYPES.PROGRESS && (
                            <div>
                                <label className="block text-sm font-medium mb-2">Progress Value</label>
                                <input
                                    type="range"
                                    min="0"
                                    max="100"
                                    value={selectedComponent.value || 50}
                                    onChange={(e) => handlePropertyChange('value', parseInt(e.target.value))}
                                    className="w-full"
                                />
                                <div className="text-xs text-gray-400 mt-1">{selectedComponent.value || 50}%</div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // Main App Component
        const App = () => {
            const [components, setComponents] = useState([]);
            const [selectedComponentId, setSelectedComponentId] = useState(null);
            const [notification, setNotification] = useState(null);
            const [activeTab, setActiveTab] = useState('components');

            const selectedComponent = components.find(comp => comp.id === selectedComponentId);

            const showNotification = (message, type = 'info') => {
                setNotification({ message, type });
            };

            const addComponent = useCallback((componentData) => {
                const newComponent = {
                    id: generateId(),
                    type: componentData.type,
                    content: componentData.name,
                    x: 0,
                    y: 0,
                    ...componentData
                };
                
                setComponents(prev => [...prev, newComponent]);
                setSelectedComponentId(newComponent.id);
                showNotification(`${componentData.name} added to canvas`, 'success');
            }, []);

            const updateComponent = useCallback((id, updates) => {
                setComponents(prev => prev.map(comp => 
                    comp.id === id ? { ...comp, ...updates } : comp
                ));
            }, []);

            const deleteComponent = useCallback((id) => {
                setComponents(prev => prev.filter(comp => comp.id !== id));
                if (selectedComponentId === id) {
                    setSelectedComponentId(null);
                }
                showNotification('Component deleted', 'success');
            }, [selectedComponentId]);

            const executeFunction = useCallback((func) => {
                showNotification(`Executing ${func.name}...`, 'info');
                
                // Simulate function execution
                setTimeout(() => {
                    showNotification(`${func.name} completed successfully!`, 'success');
                }, 1500);
            }, []);

            const handleDrop = useCallback((dropData) => {
                // Handle drop logic here if needed
                console.log('Drop data:', dropData);
            }, []);

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-4">
                    {/* Header */}
                    <div className="mb-6">
                        <div className="flex items-center justify-between mb-4">
                            <div className="flex items-center space-x-4">
                                <div className="w-12 h-12 bg-gradient-to-r from-purple-500 to-blue-500 rounded-xl flex items-center justify-center shadow-lg">
                                    <Icon name="Zap" size={24} className="text-white" />
                                </div>
                                <div>
                                    <h1 className="text-2xl font-bold text-white">KN3AUX-CODEâ„¢</h1>
                                    <p className="text-purple-200 text-sm">Universal Mobile App Builder</p>
                                </div>
                            </div>
                            
                            <div className="flex items-center space-x-4">
                                <div className="text-right text-white">
                                    <div className="text-sm font-medium">{components.length} Components</div>
                                    <div className="text-xs text-purple-200">Ready to deploy</div>
                                </div>
                                <button className="px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all shadow-lg">
                                    <Icon name="Rocket" size={16} className="mr-2" />
                                    Deploy
                                </button>
                            </div>
                        </div>

                        {/* Tab Navigation */}
                        <div className="flex space-x-2">
                            {[
                                { id: 'components', name: 'Components', icon: 'Package' },
                                { id: 'functions', name: 'Functions', icon: 'Zap' },
                                { id: 'properties', name: 'Properties', icon: 'Settings' }
                            ].map(tab => (
                                <button
                                    key={tab.id}
                                    onClick={() => setActiveTab(tab.id)}
                                    className={`flex items-center space-x-2 px-4 py-2 rounded-lg transition-all ${
                                        activeTab === tab.id
                                            ? 'bg-white text-purple-900 shadow-lg'
                                            : 'bg-white/10 text-white hover:bg-white/20'
                                    }`}
                                >
                                    <Icon name={tab.icon} size={16} />
                                    <span className="font-medium">{tab.name}</span>
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* Main Content */}
                    <div className="flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:space-x-4 h-[calc(100vh-200px)]">
                        {/* Left Panel */}
                        <div className="w-full lg:w-80">
                            {activeTab === 'components' && (
                                <ComponentLibrary onAddComponent={addComponent} />
                            )}
                            {activeTab === 'functions' && (
                                <FunctionPanel onExecuteFunction={executeFunction} />
                            )}
                            {activeTab === 'properties' && (
                                <PropertiesPanel 
                                    selectedComponent={selectedComponent}
                                    onUpdateComponent={updateComponent}
                                />
                            )}
                        </div>

                        {/* Canvas */}
                        <DroppableCanvas
                            components={components}
                            onDrop={handleDrop}
                            onSelectComponent={setSelectedComponentId}
                            selectedId={selectedComponentId}
                            onUpdateComponent={updateComponent}
                            onDeleteComponent={deleteComponent}
                        />
                    </div>

                    {/* Notification */}
                    {notification && (
                        <Notification
                            message={notification.message}
                            type={notification.type}
                            onClose={() => setNotification(null)}
                        />
                    )}
                </div>
            );
        };

        // Render the app
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>